##### 02 网络模型

OSI七层模型：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层

TCP/IP四层模型：数据链路层（以太网协议）、网络层（ip协议）、传输层（tcp协议）、应用层（http协议）

> 四层模型把会话层、表示层、应用层合并为了应用层，同时没有把物理层算在内

从底向上的网络分层：

- 物理层

  把各个电脑连接起来，形成一个网络，传输0、1电信号。

- 数据链路层

  通过`以太网协议`对电信号进行分组。

  一组电信号是一个数据包，叫`帧（frame）`，每个`帧`分成两个部分，`标头（head）`和`数据（data）`。

  标头包含一些说明性的东西，比如发送者、接收者和数据类型。所以以太网规定发送的数据包必须指定目标电脑网卡的`mac地址`。

  以太网规定接入网络里的所有设备都必须有个网卡，每个网卡都必须包含一个`mac地址`，`mac地址`是网卡的唯一标识。网卡地址就是`mac地址`。

  网络交换机工作在数据链路层，主要用于局域网通信，通过`mac地址`寻址和传输数据包。

  以太网的数据包怎么从一个`mac地址`发送到另一个`mac地址`？  

  如果一个电脑发送数据出去，会广播给局域网内所有电脑设备的网卡，然后每台电脑从数据包获取接收者的`mac地址`，跟自己的`mac`地址进行对比，如果一样，则说明是发送给自己的数据包。
  
- 网络层

  通过ip协议来判断网络设备是不是在同一个子网内。

  每台电脑都会分配一个ip地址，前24位表示网络，后8位表示主机。

  怎么判断两个ip地址是不是一个子网？

  把两个ip地址和自己的子网掩码进行二进制的`与`运算，比较表示网络部分的地址是否一样。

  如果发现要接受数据包的计算机不在子网内，那么就不能通过广播来发送数据包，需要通过路由来发送。

  路由其实就是配置了多个网卡的设备，可以通过不同的网卡接入不同的设备，负责将多个子网进行连接。

  路由上每个网卡都有`mac`地址跟`ip地址`，但是不能通过`mac地址`寻址，必须通过`ip地址`寻址

  网关就是路由的一种，运行在网络层。

  一般路由器包含了交换机与路由两个功能。

  > LAN（local area network）局域网
  >
  > WAN （wide area network）广域网
  >
  > WLAN （wireless local area network）无线局域网

- 传输层

  建立某个主机的某个端口到另一个主机的某个端口的连接。

  因为多个应用程序通过一个网卡来进行通信时，需要通过端口号来区分是否是属于自己的数据。

  `udp`和`tcp`都输传输层协议，作用就是在数据包里加入端口号，通过端口号进行点对点的通信。

- 应用层

  接收到数据之后，针对各种不同的应用，邮件、网页等，通过不同的应用层协议进行解析。

  最常见的协议是`http协议`。

  